(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{334:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"服务器脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器脚本","aria-hidden":"true"}},[t._v("#")]),t._v(" 服务器脚本")]),t._v(" "),a("p",[t._v("服务器上创建 "),a("code",[t._v("*.sh")]),t._v(" 的文件")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cd /root/HappyLittleStack && \\\ngit pull && \\\nyarn && \\\nyarn run build && \\\ncd /root/HappyLittleStack/public && \\\nzip -r /root/HappyLittleStack/public/dist.zip . && \\\ncp -r /root/HappyLittleStack/public/dist.zip /var/www/happy-little-stack && \\\nunzip -o -d /var/www/happy-little-stack /var/www/happy-little-stack/dist.zip\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("cd 的路径需要绝对路径，不然或出现路径不对的问题")])]),t._v(" "),a("p",[t._v("用 travis 执行服务器上的 "),a("code",[t._v("*.sh")]),t._v(" 文件")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("after_deploy")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chmod 600 ~/.ssh/id_rsa\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' ssh root@"$HOST" '),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("o StrictHostKeyChecking=no 'sudo /root/deploy/happyLittleStack.sh'\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])])}],!1,null,null,null);s.default=e.exports}}]);